generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model artiststyles {
  id       Int    @id @default(autoincrement())
  artistId Int
  styleId  Int
  users    users  @relation(fields: [artistId], references: [userId], onDelete: NoAction, onUpdate: NoAction, map: "artiststyles_ibfk_1")
  styles   styles @relation(fields: [styleId], references: [styleId], onDelete: NoAction, onUpdate: NoAction, map: "artiststyles_ibfk_2")

  @@index([artistId], map: "artistId")
  @@index([styleId], map: "styleId")
}

model bookings {
  bookingId                      Int             @id @default(autoincrement())
  userId                         Int
  artistId                       Int
  size                           String?         @db.VarChar(50)
  placement                      String?         @db.VarChar(100)
  referenceImageURL              String?         @db.VarChar(255)
  isColor                        Boolean?        @default(false)
  dateTime                       DateTime        @db.DateTime(0)
  statusId                       Int
  createdAt                      DateTime?       @default(now()) @db.DateTime(0)
  comment                        String?         @db.Text
  price                          Decimal?        @db.Decimal(10, 2)
  users_bookings_userIdTousers   users           @relation("bookings_userIdTousers", fields: [userId], references: [userId], onDelete: NoAction, onUpdate: NoAction, map: "bookings_ibfk_1")
  users_bookings_artistIdTousers users           @relation("bookings_artistIdTousers", fields: [artistId], references: [userId], onDelete: NoAction, onUpdate: NoAction, map: "bookings_ibfk_2")
  bookingstatuses                bookingstatuses @relation(fields: [statusId], references: [statusId], onDelete: NoAction, onUpdate: NoAction, map: "bookings_ibfk_3")
  reviews                        reviews[]

  @@index([artistId], map: "artistId")
  @@index([statusId], map: "statusId")
  @@index([userId], map: "userId")
}

model bookingstatuses {
  statusId Int        @id @default(autoincrement())
  status   String     @db.VarChar(50)
  bookings bookings[]
}

model cities {
  cityId      Int     @id @default(autoincrement())
  name        String  @db.VarChar(100)
  countryName String  @db.VarChar(100)
  users       users[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model reviews {
  reviewId  Int       @id @default(autoincrement())
  userId    Int
  bookingId Int
  createdAt DateTime? @default(now()) @db.DateTime(0)
  rating    Int?      @db.TinyInt
  comment   String?   @db.Text
  users     users     @relation(fields: [userId], references: [userId], onDelete: NoAction, onUpdate: NoAction, map: "reviews_ibfk_1")
  bookings  bookings  @relation(fields: [bookingId], references: [bookingId], onDelete: NoAction, onUpdate: NoAction, map: "reviews_ibfk_2")

  @@index([bookingId], map: "bookingId")
}

model styles {
  styleId      Int            @id @default(autoincrement())
  styleName    String         @db.VarChar(100)
  description  String?        @db.Text
  artiststyles artiststyles[]
}

model tattoos {
  tattooId   Int         @id @default(autoincrement())
  artistId   Int
  tattooName String?     @db.VarChar(100)
  imageURL   String?     @db.VarChar(255)
  favorites  favorites[]
  users      users       @relation(fields: [artistId], references: [userId], onDelete: NoAction, onUpdate: NoAction, map: "tattoos_ibfk_1")

  @@index([artistId], map: "artistId")
}

model users {
  userId                            Int                @id @default(autoincrement())
  cityId                            Int?
  email                             String             @unique(map: "email") @db.VarChar(255)
  phoneNumber                       String?            @db.VarChar(30)
  firstName                         String             @db.VarChar(100)
  lastName                          String             @db.VarChar(100)
  password                          String             @db.VarChar(255)
  birthDate                         DateTime?          @db.Date
  isArtist                          Boolean?           @default(false)
  artistDescription                 String?            @db.Text
  streetAddress                     String?            @db.VarChar(255)
  instagramLink                     String?            @db.VarChar(255)
  portfolioLink                     String?            @db.VarChar(255)
  imageURL                          String?            @db.VarChar(255)
  membershipFee                     Decimal?           @default(0.00) @db.Decimal(10, 2)
  appointmentslots                  appointmentslots[]
  artiststyles                      artiststyles[]
  bookings_bookings_userIdTousers   bookings[]         @relation("bookings_userIdTousers")
  bookings_bookings_artistIdTousers bookings[]         @relation("bookings_artistIdTousers")
  favorites                         favorites[]
  reviews                           reviews[]
  savedar                           savedar[]
  tattoos                           tattoos[]
  cities                            cities?            @relation(fields: [cityId], references: [cityId], onDelete: NoAction, onUpdate: NoAction, map: "users_ibfk_1")

  @@index([cityId], map: "cityId")
}

model appointmentslots {
  slotId   Int      @id @default(autoincrement())
  artistId Int
  dateTime DateTime @db.DateTime(0)
  duration Int
  isBooked Boolean? @default(false)
  users    users    @relation(fields: [artistId], references: [userId], onDelete: NoAction, onUpdate: NoAction, map: "appointmentslots_ibfk_1")

  @@unique([artistId, dateTime], map: "artistId")
}

model favorites {
  favId    Int     @id @default(autoincrement())
  userId   Int
  tattooId Int
  users    users   @relation(fields: [userId], references: [userId], onDelete: NoAction, onUpdate: NoAction, map: "favorites_ibfk_1")
  tattoos  tattoos @relation(fields: [tattooId], references: [tattooId], onDelete: NoAction, onUpdate: NoAction, map: "favorites_ibfk_2")

  @@unique([userId, tattooId], map: "userId")
  @@index([tattooId], map: "tattooId")
}

model savedar {
  savedId  Int    @id @default(autoincrement())
  userId   Int
  imageURL String @db.VarChar(255)
  users    users  @relation(fields: [userId], references: [userId], onDelete: NoAction, onUpdate: NoAction, map: "savedar_ibfk_1")

  @@unique([userId, imageURL], map: "userId")
}
